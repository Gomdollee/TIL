# π“ μΈν„°νμ΄μ¤ vs μƒμ† 

> ν† λΉ„μ μ¤ν”„λ§ μ±…μ—μ„ 
> "μΈν„°νμ΄μ¤λ¥Ό λ„μ…ν•κ³  ν΄λΌμ΄μ–ΈνΈμ λ„μ›€μ„ μ–»λ” λ°©λ²•μ€ μƒμ†μ„ μ‚¬μ©ν•΄ 
> λΉ„μ·ν• μ‹λ„λ¥Ό ν–μ„ κ²½μ°μ— λΉ„ν•΄μ„ ν›¨μ”¬ μ μ—°ν•λ‹¤." λΌλ” κΈ€μ„ λ³΄κ³  μƒκ°ν•κ²ƒμ„ μ •λ¦¬  

---

## β… κ²°λ΅ 
**μΈν„°νμ΄μ¤ λ„μ… + ν΄λΌμ΄μ–ΈνΈ λ„μ›€μ΄ μƒμ†λ³΄λ‹¤ ν›¨μ”¬ μ μ—°ν•¨**

---

## π’» μƒμ†λ¶€ν„° μ•μ•„λ³΄κΈ°

```java 
// μ¶”μƒ ν΄λμ¤ - λ¶€λ¨κ°€ νλ¦„μ„ μ μ–΄
public abstract class UserDao {
    public void addUser(String userId) {
        Connection conn = getConnection();
        System.out.println("INSERT INTO users (id) VALUES ('" + userId + "');");
        close(conn);
    }

    protected abstract Connection getConnection();

    private void close(Connection conn) {
        System.out.println(" DB μ—°κ²°λ ");
    }

}

// Postgresqlμ© κµ¬ν„μ²΄
public class PsqlUserDao extends UserDao {
    @Override
    protected Connection getConnection() {
        System.out.println("DBμ—°κ²°");
        return new Connection(); 
    }
}

// μ‚¬μ© μ½”λ“
public class App {
    public static void main(String[] args) {
        UserDao userDao = new PsqlUserDao();
        userDao.addUser("junwon");
    }
}
```
- UserDaoμ μ „μ²΄ νλ¦„μ€ λ¶€λ¨κ°€ κ³ μ • 
- getCinnection()λ§ λ°”κΏ€ μ μμ (μ»¨νΈλ΅¤ν•κΈ° μ–΄λ ¤μ›€)
- μ¬μ‚¬μ©μ„±, ν™•μ¥μ„± λ‚®μ 
- DB μ—°κ²° λ°©μ‹μ΄ λ°”λ€λ©΄ μ „μ²΄ κµ¬μ΅°λ¥Ό μƒμ† κΈ°λ°μΌλ΅ λ‹¤μ‹ λ§λ“¤μ–΄μ•Ό ν•¨ -> μ±…μ—μ„λ„ λ°”λ€ λ¶€λ¶„ 

---
## π§± μΈν„°νμ΄μ¤μ— λ€ν•΄ μ•μ•„λ³΄κΈ° 

```java 
public interface ConnectionMaker {
    Connection makeConnection();
}

public class PostgreSqlConnectionMaker implenets ConnectionMaker {
    public Connection makeConnection() {
        System.out.println(" PostgreSql DB μ—°κ²° ")

    }
}

public class UserDao {
    private final ConnectionMaker connectionMaker; 

    public UserDao(ConnectionMaker connectionMaker) { 
        this.connectionMaker = connectionMaker; 
    }

    public void add(String userId) {
        Connection conn = connectionMaker.makeConnection; 

        System.out.println("INSERT INTO users VALUES ('" + userId + "')");
        close(conn);
    }

    private void close(Connection conn) {
        System.out.println(" DB μ—°κ²°λ ");
    }
 }

 // μ‚¬μ© μ½”λ“
public class App {
    public static void main(String[] args) {
        ConnectionMaker connectionMaker = new PsqlConnectionMaker();
        UserDao userDao = new UserDao(connectionMaker);
        userDao.addUser("junwon");
    }
}
```
- UserDao νλ¦„μ€ κ·Έλ€λ΅, DB μ—°κ²° μ λµλ§ μ™Έλ¶€μ—μ„ μ£Όμ… 
- DB λ³€κ²½μ— μ μ—°ν•¨ 
- ν…μ¤νΈμ— μ©μ΄ν•¨ 
- μμ΅΄μ„± μ—­μ „ μ›μΉ™(DIP) μ‹¤ν„ κ°€λ¥ -> μ¤ν”„λ§μ DI κµ¬μ΅°λ‘ κ¶ν•© μΆ‹μ 
- μ μ§€λ³΄μλ‚ κΈ°λ¥ν™•μ¥μ— μ μ—°ν•¨ 


